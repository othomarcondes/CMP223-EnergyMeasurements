#+title: Phase 2 Stress
* Phase 2 Stress
Preliminary experiments with the stress package on the Poti partition.
Changing:
- CPU
- I/O
- Memory

#+begin_src R
options(crayon.enabled=FALSE)
library(DoE.base)
library(tidyverse)

fator_time   <- c("10m", "30m")
fator_nodes  <- 1:2

# allowed levels
fator_cpu    <- c(0, 8, 12, 24)
fator_io     <- c(0, 8, 12, 24)
fator_memory <- c(0, 8, 12, 24)

job_name     <- "stress_poti_1_nodes"

# full factorial
fac.design(nfactors = 5,
    replications=1,
    repeat.only = FALSE,
    randomize=TRUE,
    seed=0,
    nlevels  = c(length(fator_time),
                length(fator_cpu),
                length(fator_io),
                length(fator_memory),
                length(fator_nodes)),
    factor.names = list(
        time   = fator_time,
        cpu    = fator_cpu,
        io     = fator_io,
        memory = fator_memory,
        nodes  = fator_nodes
    )) |>
  as_tibble() |>
  mutate(across(c(cpu, io, memory), ~ as.numeric(as.character(.)))) |>
  filter(cpu + io + memory == 24) |>
  filter(nodes == 1) |>
  filter(time == "10m") |>
  mutate(exp   = job_name) |>
  mutate(Order = paste0(exp,
                        "_", time,
                        "_CPU", cpu,
                        "_IO", io,
                        "_MEM", memory,
                        "_N", nodes,
                        "_", 1:n())) |>
  write_csv(paste0(job_name, "_experimental_project.csv"), progress = FALSE) |>
  print()
#+end_src

#+RESULTS:
| 10m |  8 |  8 |  8 | 1 | stress_poti_1_nodes | stress_poti_1_nodes_10m_CPU8_IO8_MEM8_N1_1   |
| 10m | 12 | 12 |  0 | 1 | stress_poti_1_nodes | stress_poti_1_nodes_10m_CPU12_IO12_MEM0_N1_2 |
| 10m | 24 |  0 |  0 | 1 | stress_poti_1_nodes | stress_poti_1_nodes_10m_CPU24_IO0_MEM0_N1_3  |
| 10m |  0 | 24 |  0 | 1 | stress_poti_1_nodes | stress_poti_1_nodes_10m_CPU0_IO24_MEM0_N1_4  |
| 10m | 12 |  0 | 12 | 1 | stress_poti_1_nodes | stress_poti_1_nodes_10m_CPU12_IO0_MEM12_N1_5 |
| 10m |  0 | 12 | 12 | 1 | stress_poti_1_nodes | stress_poti_1_nodes_10m_CPU0_IO12_MEM12_N1_6 |
| 10m |  0 |  0 | 24 | 1 | stress_poti_1_nodes | stress_poti_1_nodes_10m_CPU0_IO0_MEM24_N1_7  |
